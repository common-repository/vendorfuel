<button
	type="button"
	class="btn btn-primary btn-sm"
	data-bs-toggle="modal"
	data-bs-target="#ctaModal-{{ $ctrl.uuid }}"
	ng-click="$ctrl.handleClick()"
	ng-disabled="$ctrl.isBusy"
	title="Add this item to your cart at current price"
>
	Add to Cart
</button>

<div
	aria-hidden="true"
	aria-labelledby="ctaModalLabel"
	class="modal fade"
	ng-attr-id="ctaModal-{{ $ctrl.uuid }}"
	tabindex="-1"
>
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h1 class="modal-title fs-5" id="ctaModalLabel">Add to Cart</h1>
				<button
					type="button"
					class="btn-close"
					data-bs-dismiss="modal"
					aria-label="Close"
				></button>
			</div>
			<div class="modal-body">
				<div class="d-flex justify-content-center" ng-if="$ctrl.isBusy">
					<div class="spinner-border" role="status">
						<span class="visually-hidden">Loading...</span>
					</div>
				</div>
				<div ng-if="!$ctrl.isBusy">
					<div ng-if="$ctrl.priceAvailability.currentPrice">
						Add <em>{{ $ctrl.product.description }}</em> to your
						cart for {{ $ctrl.priceAvailability.currentPrice |
						currency }}?
					</div>
					<div class="alert alert-danger mb-0" ng-if="$ctrl.error">
						{{ $ctrl.error }}
					</div>
					<div class="alert alert-warning mb-0" ng-if="$ctrl.warning">
						{{ $ctrl.warning }}
					</div>
					<div
						class="alert alert-info mb-0"
						ng-if="$ctrl.notification"
					>
						{{ $ctrl.notification }}
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button
					class="btn btn-secondary"
					data-bs-dismiss="modal"
					type="button"
				>
					{{ $ctrl.priceAvailability.currentPrice ? 'Cancel' : 'Close'
					}}
				</button>
				<button
					class="btn btn-primary"
					data-bs-dismiss="modal"
					ng-click="$ctrl.handleAddToCart()"
					ng-if="$ctrl.priceAvailability.currentPrice"
					type="button"
				>
					Add to Cart
				</button>
			</div>
		</div>
	</div>
</div>
